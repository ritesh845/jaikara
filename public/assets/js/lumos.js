!function(a){"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],a):"undefined"!=typeof module&&module.exports?a(require("jquery")):a(jQuery)}((function(f){var y="1.6.15",p="left",o="right",e="up",x="down",c="in",A="out",m="none",s="auto",l="swipe",t="pinch",B="tap",j="doubletap",b="longtap",z="hold",E="horizontal",u="vertical",i="all",r=10,g="start",k="move",h="end",q="cancel",a="ontouchstart"in window,v=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled&&!a,d=(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&!a,C="TouchSwipe",n={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"label, button, input, select, textarea, a, .noSwipe",preventDefaultEvents:!0};function w(F){return!F||void 0!==F.allowPageScroll||void 0===F.swipe&&void 0===F.swipeStatus||(F.allowPageScroll=m),void 0!==F.click&&void 0===F.tap&&(F.tap=F.click),F||(F={}),F=f.extend({},f.fn.swipe.defaults,F),this.each((function(){var H=f(this),G=H.data(C);G||(G=new D(this,F),H.data(C,G))}))}function D(a5,au){var au=f.extend({},au),az=a||d||!au.fallbackToMouseEvents,K=az?d?v?"MSPointerDown":"pointerdown":"touchstart":"mousedown",ax=az?d?v?"MSPointerMove":"pointermove":"touchmove":"mousemove",V=az?d?v?"MSPointerUp":"pointerup":"touchend":"mouseup",T=az?d?"mouseleave":null:"mouseleave",aD=d?v?"MSPointerCancel":"pointercancel":"touchcancel",ag=0,aP=null,a2=null,ac=0,a1=0,aZ=0,H=1,ap=0,aJ=0,N=null,aR=f(a5),aa="start",X=0,aQ={},U=0,a3=0,a6=0,ay=0,O=0,aW=null,af=null;try{aR.bind(K,aN),aR.bind(aD,ba)}catch(aj){f.error("events not supported "+K+","+aD+" on jQuery.swipe")}function aN(be){if(!(aB()||f(be.target).closest(au.excludedElements,aR).length>0)){var bf=be.originalEvent?be.originalEvent:be,bd,bg=bf.touches,bc=bg?bg[0]:bf;return aa=g,bg?X=bg.length:!1!==au.preventDefaultEvents&&be.preventDefault(),ag=0,aP=null,a2=null,aJ=null,ac=0,a1=0,aZ=0,H=1,ap=0,N=ab(),S(),ai(0,bc),!bg||X===au.fingers||au.fingers===i||aX()?(U=ar(),2==X&&(ai(1,bg[1]),a1=aZ=at(aQ[0].start,aQ[1].start)),(au.swipeStatus||au.pinchStatus)&&(bd=P(bf,aa))):bd=!1,!1===bd?(P(bf,aa=q),bd):(au.hold&&(af=setTimeout(f.proxy((function(){aR.trigger("hold",[bf.target]),au.hold&&(bd=au.hold.call(aR,bf,bf.target))}),this),au.longTapThreshold)),an(!0),null)}}function a4(bf){var bi=bf.originalEvent?bf.originalEvent:bf;if(aa!==h&&aa!==q&&!al()){var be,bj=bi.touches,bd,bg=aH(bj?bj[0]:bi);if(a3=ar(),bj&&(X=bj.length),au.hold&&clearTimeout(af),aa=k,2==X&&(0==a1?(ai(1,bj[1]),a1=aZ=at(aQ[0].start,aQ[1].start)):(aH(bj[1]),aZ=at(aQ[0].end,aQ[1].end),aJ=aq(aQ[0].end,aQ[1].end)),H=a8(a1,aZ),ap=Math.abs(a1-aZ)),X===au.fingers||au.fingers===i||!bj||aX()){if(aP=aL(bg.start,bg.end),ak(bf,a2=aL(bg.last,bg.end)),ag=aS(bg.start,bg.end),ac=aM(),aI(aP,ag),be=P(bi,aa),!au.triggerOnTouchEnd||au.triggerOnTouchLeave){var bc=!0;if(au.triggerOnTouchLeave){var bh=aY(this);bc=F(bg.end,bh)}!au.triggerOnTouchEnd&&bc?aa=aC(k):au.triggerOnTouchLeave&&!bc&&(aa=aC(h)),aa!=q&&aa!=h||P(bi,aa)}}else P(bi,aa=q);!1===be&&P(bi,aa=q)}}function M(bc){var bd=bc.originalEvent?bc.originalEvent:bc,be=bd.touches;if(be){if(be.length&&!al())return G(bd),!0;if(be.length&&al())return!0}return al()&&(X=ay),a3=ar(),ac=aM(),bb()||!am()?P(bd,aa=q):au.triggerOnTouchEnd||0==au.triggerOnTouchEnd&&aa===k?(!1!==au.preventDefaultEvents&&bc.preventDefault(),P(bd,aa=h)):!au.triggerOnTouchEnd&&a7()?aF(bd,aa=h,B):aa===k&&P(bd,aa=q),an(!1),null}function ba(){X=0,a3=0,U=0,a1=0,aZ=0,H=1,S(),an(!1)}function L(bc){var bd=bc.originalEvent?bc.originalEvent:bc;au.triggerOnTouchLeave&&P(bd,aa=aC(h))}function aK(){aR.unbind(K,aN),aR.unbind(aD,ba),aR.unbind(ax,a4),aR.unbind(V,M),T&&aR.unbind(T,L),an(!1)}function aC(bg){var bf=bg,be=aA(),bd=am(),bc=bb();return!be||bc?bf=q:!bd||bg!=k||au.triggerOnTouchEnd&&!au.triggerOnTouchLeave?!bd&&bg==h&&au.triggerOnTouchLeave&&(bf=q):bf=h,bf}function P(be,bc){var bd,bf=be.touches;return(J()||W())&&(bd=aF(be,bc,l)),(Q()||aX())&&!1!==bd&&(bd=aF(be,bc,t)),aG()&&!1!==bd?bd=aF(be,bc,j):ao()&&!1!==bd?bd=aF(be,bc,b):ah()&&!1!==bd&&(bd=aF(be,bc,B)),bc===q&&(W()&&(bd=aF(be,bc,l)),aX()&&(bd=aF(be,bc,t)),ba(be)),bc===h&&(bf&&bf.length||ba(be)),bd}function aF(bf,bc,be){var bd;if(be==l){if(aR.trigger("swipeStatus",[bc,aP||null,ag||0,ac||0,X,aQ,a2]),au.swipeStatus&&!1===(bd=au.swipeStatus.call(aR,bf,bc,aP||null,ag||0,ac||0,X,aQ,a2)))return!1;if(bc==h&&aV()){if(clearTimeout(aW),clearTimeout(af),aR.trigger("swipe",[aP,ag,ac,X,aQ,a2]),au.swipe&&!1===(bd=au.swipe.call(aR,bf,aP,ag,ac,X,aQ,a2)))return!1;switch(aP){case p:aR.trigger("swipeLeft",[aP,ag,ac,X,aQ,a2]),au.swipeLeft&&(bd=au.swipeLeft.call(aR,bf,aP,ag,ac,X,aQ,a2));break;case o:aR.trigger("swipeRight",[aP,ag,ac,X,aQ,a2]),au.swipeRight&&(bd=au.swipeRight.call(aR,bf,aP,ag,ac,X,aQ,a2));break;case e:aR.trigger("swipeUp",[aP,ag,ac,X,aQ,a2]),au.swipeUp&&(bd=au.swipeUp.call(aR,bf,aP,ag,ac,X,aQ,a2));break;case x:aR.trigger("swipeDown",[aP,ag,ac,X,aQ,a2]),au.swipeDown&&(bd=au.swipeDown.call(aR,bf,aP,ag,ac,X,aQ,a2))}}}if(be==t){if(aR.trigger("pinchStatus",[bc,aJ||null,ap||0,ac||0,X,H,aQ]),au.pinchStatus&&!1===(bd=au.pinchStatus.call(aR,bf,bc,aJ||null,ap||0,ac||0,X,H,aQ)))return!1;if(bc==h&&a9())switch(aJ){case c:aR.trigger("pinchIn",[aJ||null,ap||0,ac||0,X,H,aQ]),au.pinchIn&&(bd=au.pinchIn.call(aR,bf,aJ||null,ap||0,ac||0,X,H,aQ));break;case A:aR.trigger("pinchOut",[aJ||null,ap||0,ac||0,X,H,aQ]),au.pinchOut&&(bd=au.pinchOut.call(aR,bf,aJ||null,ap||0,ac||0,X,H,aQ))}}return be==B?bc!==q&&bc!==h||(clearTimeout(aW),clearTimeout(af),Z()&&!I()?(O=ar(),aW=setTimeout(f.proxy((function(){O=null,aR.trigger("tap",[bf.target]),au.tap&&(bd=au.tap.call(aR,bf,bf.target))}),this),au.doubleTapThreshold)):(O=null,aR.trigger("tap",[bf.target]),au.tap&&(bd=au.tap.call(aR,bf,bf.target)))):be==j?bc!==q&&bc!==h||(clearTimeout(aW),clearTimeout(af),O=null,aR.trigger("doubletap",[bf.target]),au.doubleTap&&(bd=au.doubleTap.call(aR,bf,bf.target))):be==b&&(bc!==q&&bc!==h||(clearTimeout(aW),O=null,aR.trigger("longtap",[bf.target]),au.longTap&&(bd=au.longTap.call(aR,bf,bf.target)))),bd}function am(){var bc=!0;return null!==au.threshold&&(bc=ag>=au.threshold),bc}function bb(){var bc=!1;return null!==au.cancelThreshold&&null!==aP&&(bc=aT(aP)-ag>=au.cancelThreshold),bc}function ae(){return null===au.pinchThreshold||ap>=au.pinchThreshold}function aA(){var bc;return bc=!au.maxTimeThreshold||!(ac>=au.maxTimeThreshold)}function ak(bc,bd){if(!1!==au.preventDefaultEvents)if(au.allowPageScroll===m)bc.preventDefault();else{var be=au.allowPageScroll===s;switch(bd){case p:(au.swipeLeft&&be||!be&&au.allowPageScroll!=E)&&bc.preventDefault();break;case o:(au.swipeRight&&be||!be&&au.allowPageScroll!=E)&&bc.preventDefault();break;case e:(au.swipeUp&&be||!be&&au.allowPageScroll!=u)&&bc.preventDefault();break;case x:(au.swipeDown&&be||!be&&au.allowPageScroll!=u)&&bc.preventDefault()}}}function a9(){var bd=aO(),bc=Y(),be=ae();return bd&&bc&&be}function aX(){return!!(au.pinchStatus||au.pinchIn||au.pinchOut)}function Q(){return!(!a9()||!aX())}function aV(){var bf=aA(),bh=am(),be=aO(),bc=Y(),bd,bg;return!bb()&&bc&&be&&bh&&bf}function W(){return!!(au.swipe||au.swipeStatus||au.swipeLeft||au.swipeRight||au.swipeUp||au.swipeDown)}function J(){return!(!aV()||!W())}function aO(){return X===au.fingers||au.fingers===i||!a}function Y(){return 0!==aQ[0].end.x}function a7(){return!!au.tap}function Z(){return!!au.doubleTap}function aU(){return!!au.longTap}function R(){if(null==O)return!1;var bc=ar();return Z()&&bc-O<=au.doubleTapThreshold}function I(){return R()}function aw(){return(1===X||!a)&&(isNaN(ag)||ag<au.threshold)}function a0(){return ac>au.longTapThreshold&&ag<r}function ah(){return!(!aw()||!a7())}function aG(){return!(!R()||!Z())}function ao(){return!(!a0()||!aU())}function G(bc){a6=ar(),ay=bc.touches.length+1}function S(){a6=0,ay=0}function al(){var bc=!1,bd;a6&&(ar()-a6<=au.fingerReleaseThreshold&&(bc=!0));return bc}function aB(){return!(!0!==aR.data(C+"_intouch"))}function an(bc){aR&&(!0===bc?(aR.bind(ax,a4),aR.bind(V,M),T&&aR.bind(T,L)):(aR.unbind(ax,a4,!1),aR.unbind(V,M,!1),T&&aR.unbind(T,L,!1)),aR.data(C+"_intouch",!0===bc))}function ai(be,bc){var bd={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};return bd.start.x=bd.last.x=bd.end.x=bc.pageX||bc.clientX,bd.start.y=bd.last.y=bd.end.y=bc.pageY||bc.clientY,aQ[be]=bd,bd}function aH(bc){var be=void 0!==bc.identifier?bc.identifier:0,bd=ad(be);return null===bd&&(bd=ai(be,bc)),bd.last.x=bd.end.x,bd.last.y=bd.end.y,bd.end.x=bc.pageX||bc.clientX,bd.end.y=bc.pageY||bc.clientY,bd}function ad(bc){return aQ[bc]||null}function aI(bc,bd){bd=Math.max(bd,aT(bc)),N[bc].distance=bd}function aT(bc){if(N[bc])return N[bc].distance}function ab(){var bc={};return bc[p]=av(p),bc[o]=av(o),bc.up=av(e),bc[x]=av(x),bc}function av(bc){return{direction:bc,distance:0}}function aM(){return a3-U}function at(bf,be){var bd=Math.abs(bf.x-be.x),bc=Math.abs(bf.y-be.y);return Math.round(Math.sqrt(bd*bd+bc*bc))}function a8(bc,bd){var be;return(bd/bc*1).toFixed(2)}function aq(){return H<1?A:c}function aS(bd,bc){return Math.round(Math.sqrt(Math.pow(bc.x-bd.x,2)+Math.pow(bc.y-bd.y,2)))}function aE(bf,bd){var bc=bf.x-bd.x,bh=bd.y-bf.y,be=Math.atan2(bh,bc),bg=Math.round(180*be/Math.PI);return bg<0&&(bg=360-Math.abs(bg)),bg}function aL(bd,bc){var be=aE(bd,bc);return be<=45&&be>=0?p:be<=360&&be>=315?p:be>=135&&be<=225?o:be>45&&be<135?x:e}function ar(){var bc;return(new Date).getTime()}function aY(bc){var be=(bc=f(bc)).offset(),bd;return{left:be.left,right:be.left+bc.outerWidth(),top:be.top,bottom:be.top+bc.outerHeight()}}function F(bc,bd){return bc.x>bd.left&&bc.x<bd.right&&bc.y>bd.top&&bc.y<bd.bottom}this.enable=function(){return aR.bind(K,aN),aR.bind(aD,ba),aR},this.disable=function(){return aK(),aR},this.destroy=function(){aK(),aR.data(C,null),aR=null},this.option=function(bd,bc){if("object"==typeof bd)au=f.extend(au,bd);else if(void 0!==au[bd]){if(void 0===bc)return au[bd];au[bd]=bc}else{if(!bd)return au;f.error("Option "+bd+" does not exist on jQuery.swipe.options")}return null}}f.fn.swipe=function(H){var G=f(this),F=G.data(C);if(F&&"string"==typeof H){if(F[H])return F[H].apply(this,Array.prototype.slice.call(arguments,1));f.error("Method "+H+" does not exist on jQuery.swipe")}else if(F&&"object"==typeof H)F.option.apply(this,arguments);else if(!(F||"object"!=typeof H&&H))return w.apply(this,arguments);return G},f.fn.swipe.version=y,f.fn.swipe.defaults=n,f.fn.swipe.phases={PHASE_START:g,PHASE_MOVE:k,PHASE_END:h,PHASE_CANCEL:q},f.fn.swipe.directions={LEFT:p,RIGHT:o,UP:e,DOWN:x,IN:c,OUT:A},f.fn.swipe.pageScroll={NONE:m,HORIZONTAL:E,VERTICAL:u,AUTO:s},f.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:i}})),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}(this,(function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{},n;return(i[t]=i[t]||[])[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=0,o=i[n];e=e||[];for(var r=this._onceEvents&&this._onceEvents[t];o;){var s=r&&r[o];s&&(this.off(t,o),delete r[o]),o.apply(this,e),o=i[n+=s?0:1]}return this}},t})),function(t,e){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],(function(i){return e(t,i)})):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter")):t.imagesLoaded=e(t,t.EvEmitter)}(window,(function(t,e){function i(t,e){for(var i in e)t[i]=e[i];return t}function n(t){var e=[];if(Array.isArray(t))e=t;else if("number"==typeof t.length)for(var i=0;i<t.length;i++)e.push(t[i]);else e.push(t);return e}function o(t,e,r){return this instanceof o?("string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=n(t),this.options=i({},this.options),"function"==typeof e?r=e:i(this.options,e),r&&this.on("always",r),this.getImages(),h&&(this.jqDeferred=new h.Deferred),void setTimeout(function(){this.check()}.bind(this))):new o(t,e,r)}function r(t){this.img=t}function s(t,e){this.url=t,this.element=e,this.img=new Image}var h=t.jQuery,a=t.console;o.prototype=Object.create(e.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&d[e]){for(var i=t.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var r=t.querySelectorAll(this.options.background);for(n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}}};var d={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(e.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,t),n=i.exec(e.backgroundImage)}},o.prototype.addImage=function(t){var e=new r(t);this.images.push(e)},o.prototype.addBackground=function(t,e){var i=new s(t,e);this.images.push(i)},o.prototype.check=function(){function t(t,i,n){setTimeout((function(){e.progress(t,i,n)}))}var e=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach((function(e){e.once("progress",t),e.check()})):void this.complete()},o.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,t,e)},o.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},r.prototype=Object.create(e.prototype),r.prototype.check=function(){var t;return this.getIsImageComplete()?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},r.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},r.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype=Object.create(r.prototype),s.prototype.check=function(){var t;this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},o.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&((h=e).fn.imagesLoaded=function(t,e){var i;return new o(this,t,e).jqDeferred.promise(h(this))})},o.makeJQueryPlugin(),o})),$("body").append('<div class="lumos-container"><div class="lumos-alt-text"></div><img class="lumos-img" src="" /><svg version="1.1" class="lumos-prev" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 306 306" xml:space="preserve"><g><g id="chevron-right"><polygon points="211.7,306 247.4,270.3 130.1,153 247.4,35.7 211.7,0 58.7,153" /></g></g></svg><svg version="1.1" class="lumos-next" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 306 306" xml:space="preserve"><g><g id="chevron-right"><polygon points="94.35,0 58.65,35.7 175.95,153 58.65,270.3 94.35,306 247.35,153" /></g></g></svg><svg version="1.1" class="lumos-close" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve"><path d="M512,51.75L460.25,0L256,204.25L51.75,0L0,51.75L204.25,256L0,460.25L51.75,512L256,307.75L460.25,512L512,460.25 L307.75,256L512,51.75z" /></svg><div class="lumos-name"></div><div class="spinner"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div></div>');var lumosContainer=$(".lumos-container"),lumosImage=$(".lumos-img"),altText=$(".lumos-alt-text"),prevButton=$(".lumos-prev"),nextButton=$(".lumos-next"),closeButton=$(".lumos-close"),linkSelector=".lumos-link",lumosGalleryName=$(".lumos-name"),allButtons=".lumos-next, .lumos-prev, .lumos-close, .lumos-alt-text",spinner=$(".lumos-container .spinner"),animationSpeed=250,fadeInSpeed=750,mouseIsOnImage=!1,isSingleImage=!1,isFirst=!1,isLast=!1;function openLumos(imageToOpen,galleryName){void 0===galleryName?(disableButtons([prevButton,nextButton]),isSingleImage=!0):checkButtons($('[class=lumos-link][href="'+imageToOpen+'"]'),galleryName),disableScroll(),spinner.show(),lumosContainer.fadeIn(animationSpeed),lumosImage.attr("src",imageToOpen),lumosContainer.imagesLoaded((function(){lumosImage.fadeIn(fadeInSpeed)})),lumosGalleryName.text(galleryName),getAltText()}function getNextImage(direction){if(!isSingleImage){lumosImage.hide();for(var currentGalleryName=lumosGalleryName.text(),currentGallery=$("[data-lumos='"+currentGalleryName+"']"),currentImage=lumosImage.attr("src"),nextImage,i=0;i<currentGallery.length;i++)if(currentGallery[i].getAttribute("href")==currentImage){"next"==direction&&i++,"prev"==direction&&i--,nextImage=currentGallery[i];break}return nextImage.getAttribute("data-lumos")!=currentGalleryName?currentImage:nextImage.getAttribute("href")}}function closeLumos(){enableScroll(),lumosContainer.fadeOut(animationSpeed),lumosImage.attr("src",""),lumosGalleryName.text(""),altText.text(""),spinner.hide(),isSingleImage=!1,isFirst=!1,isLast=!1,setTimeout((function(){enableButtons([prevButton,nextButton])}),animationSpeed)}function disableButtons(buttons){for(var i=0;i<buttons.length;i++)buttons[i].hide()}function enableButtons(buttons){for(var i=0;i<buttons.length;i++)buttons[i].show()}function checkButtons(nextImage,galleryName){var currentGallery=$("[data-lumos='"+galleryName+"']"),firstImage=currentGallery[0].getAttribute("href"),lastImage=currentGallery[currentGallery.length-1].getAttribute("href");nextImage.attr("href")==firstImage?(disableButtons([prevButton]),isFirst=!0):(enableButtons([prevButton]),isFirst=!1),nextImage.attr("href")==lastImage?(disableButtons([nextButton]),isLast=!0):(enableButtons([nextButton]),isLast=!1)}function getAltText(){var currentImage=lumosImage.attr("src"),currentAltText=$("[href='"+currentImage+"']").children("img").attr("alt");null!=currentAltText&&altText.html(currentAltText)}$(linkSelector).click((function(e){var clickedImage,galleryName;e.preventDefault(),openLumos($(this).attr("href"),$(this).attr("data-lumos"))})),$(prevButton).click((function(){isFirst||openLumos(getNextImage("prev"),lumosGalleryName.text())})),$(nextButton).click((function(){isLast||openLumos(getNextImage("next"),lumosGalleryName.text())})),$(closeButton).click((function(){closeLumos()})),lumosContainer.click((function(){mouseIsOnImage||closeLumos()})),$(document).keyup((function(e){if(27==e.keyCode&&closeLumos(),37==e.keyCode){if(isFirst||isSingleImage)return;openLumos(getNextImage("prev"),lumosGalleryName.text())}if(39==e.keyCode){if(isLast||isSingleImage)return;openLumos(getNextImage("next"),lumosGalleryName.text())}})),lumosImage.mouseenter((function(){mouseIsOnImage=!0})),lumosImage.mouseleave((function(){mouseIsOnImage=!1})),$(allButtons).mouseenter((function(){mouseIsOnImage=!0})),$(allButtons).mouseleave((function(){mouseIsOnImage=!1})),lumosContainer.swipe({swipe:function(event,direction){if("left"==direction){if(isLast||isSingleImage)return;openLumos(getNextImage("next"),lumosGalleryName.text())}if("right"==direction){if(isFirst||isSingleImage)return;openLumos(getNextImage("prev"),lumosGalleryName.text())}"up"!=direction&&"down"!=direction||closeLumos()}});var keys={37:1,38:1,39:1,40:1};function preventDefault(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.returnValue=!1}function preventDefaultForScrollKeys(e){if(keys[e.keyCode])return preventDefault(e),!1}function disableScroll(){window.addEventListener&&window.addEventListener("DOMMouseScroll",preventDefault,!1),window.onwheel=preventDefault,window.onmousewheel=document.onmousewheel=preventDefault,window.ontouchmove=preventDefault,document.onkeydown=preventDefaultForScrollKeys}function enableScroll(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",preventDefault,!1),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,document.onkeydown=null}